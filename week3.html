<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IT 221 — Week 3: The Malware Menace</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    :root{
      --bg:#070A12;
      --text:#E8ECFF;
      --muted:#A9B1D6;
      --grid:rgba(122,162,247,.12);
      --cyan:#33F6FF;
      --mag:#FF2BD6;
      --lime:#7CFF6B;
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --radius: 18px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }

    html, body{ height:100%; }
    body{
      margin:0;
      background:
        radial-gradient(1200px 700px at 80% 10%, rgba(255,43,214,.10), transparent 60%),
        radial-gradient(900px 650px at 15% 25%, rgba(51,246,255,.12), transparent 55%),
        radial-gradient(800px 600px at 50% 90%, rgba(124,255,107,.08), transparent 55%),
        linear-gradient(180deg, #050713, var(--bg));
      color: var(--text);
      font-family: var(--sans);
      overflow:hidden; /* IMPORTANT: slide handles scrolling */
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    }

    /* terminal grid */
    body::before{
      content:"";
      position:fixed; inset:0;
      background-image:
        linear-gradient(to right, var(--grid) 1px, transparent 1px),
        linear-gradient(to bottom, var(--grid) 1px, transparent 1px);
      background-size: 44px 44px;
      pointer-events:none;
      opacity:.55;
      mix-blend-mode: screen;
    }

    /* scanlines */
    body::after{
      content:"";
      position:fixed; inset:0;
      background: repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,.02) 0px,
        rgba(255,255,255,.02) 1px,
        transparent 2px,
        transparent 5px
      );
      pointer-events:none;
      opacity:.45;
    }

    .mono{ font-family: var(--mono) !important; }
    .text-muted2{ color: var(--muted) !important; }

    .badge-course{
      padding: .35rem .65rem;
      border-radius: 999px;
      background: rgba(51,246,255,.10);
      border:1px solid rgba(51,246,255,.35);
      color: var(--cyan);
      letter-spacing:.08em;
      text-transform:uppercase;
      font-size:.78rem;
    }

    .btn-terminal{
      border:1px solid rgba(232,236,255,.16);
      background: rgba(11,16,32,.7);
      color: var(--text);
      border-radius: 12px;
      padding: .55rem .75rem;
    }
    .btn-terminal:hover{
      border-color: rgba(51,246,255,.55);
      box-shadow: 0 0 0 3px rgba(51,246,255,.12);
    }

    .deck{
      position: relative;
      border-radius: var(--radius);
      border: 1px solid rgba(232,236,255,.14);
      box-shadow: var(--shadow);
      overflow:hidden;
      background: linear-gradient(180deg, rgba(11,16,32,.70), rgba(10,15,26,.72));
      min-height: 0;
    }

    .deck::before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(900px 500px at 40% 15%, rgba(51,246,255,.10), transparent 60%),
        radial-gradient(700px 480px at 80% 85%, rgba(255,43,214,.10), transparent 55%);
      pointer-events:none;
      opacity:.85;
    }

    /* Key mobile fix:
       - slide scrolls
       - large bottom padding ensures sticky meta never hides content */
    .slide{
      position:absolute; inset:0;
      opacity:0;
      transform: translateY(8px) scale(.995);
      transition: opacity .22s ease, transform .22s ease;
      overflow-y:auto;
      -webkit-overflow-scrolling: touch;
      padding: 16px 14px 120px;
    }
    .slide.active{
      opacity:1;
      transform: translateY(0) scale(1);
    }

    .topline{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      font-family: var(--mono);
      color: var(--muted);
      font-size: .78rem;
      letter-spacing:.04em;
      flex-wrap:wrap;
    }

    .pip{ width:10px; height:10px; border-radius:50%; display:inline-block; box-shadow: 0 0 0 3px rgba(255,255,255,.03); background: rgba(232,236,255,.18); }
    .pip.cyan{ background: rgba(51,246,255,.85); }
    .pip.mag{ background: rgba(255,43,214,.85); }
    .pip.lime{ background: rgba(124,255,107,.85); }

    .h1{
      font-size: clamp(1.55rem, 4.0vw, 2.8rem);
      line-height:1.08;
      letter-spacing: -0.02em;
      margin: .35rem 0 0;
    }
    .subtitle{
      color: var(--muted);
      font-size: 0.95rem;
      margin-top: .5rem;
      max-width: 78ch;
    }

    .panel{
      background: rgba(7,10,18,.38);
      border: 1px solid rgba(232,236,255,.12);
      border-radius: 16px;
      padding: 14px 14px;
    }
    .kicker{
      font-family:var(--mono);
      color: var(--cyan);
      text-transform: uppercase;
      letter-spacing:.12em;
      font-size: .78rem;
      margin-bottom: .55rem;
    }
    .panel-content{
      color: var(--text);
      font-size: 1rem;
      line-height: 1.55;
      overflow-wrap: anywhere;
      word-break: break-word;
    }

    .codebox{
      font-family: var(--mono);
      font-size: .9rem;
      line-height: 1.45;
      color: #EAFDFF;
      background: rgba(5,7,19,.65);
      border: 1px solid rgba(51,246,255,.22);
      border-radius: 16px;
      padding: 12px 12px;
      white-space: pre;
      overflow:auto;
    }

    /* Sticky meta bar: visible but never blocks content due to slide bottom padding */
    .meta{
      position: sticky;
      bottom: 0;
      margin-top: 14px;
      padding-top: 10px;
      padding-bottom: 10px;
      border-top: 1px solid rgba(232,236,255,.10);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      font-family: var(--mono);
      color: var(--muted);
      font-size: .78rem;
      background: linear-gradient(180deg, rgba(10,15,26,0.08), rgba(10,15,26,0.90));
      backdrop-filter: blur(6px);
    }

    .notes{
      position: fixed;
      left: 12px;
      right: 12px;
      bottom: 12px;
      max-height: 55vh;
      overflow:auto;
      background: rgba(5,7,19,.90);
      border: 1px solid rgba(255,43,214,.25);
      border-radius: 16px;
      padding: 14px 14px;
      box-shadow: var(--shadow);
      display:none;
      z-index: 1055;
    }
    .notes.visible{ display:block; }
    .notes .hdr{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      font-family: var(--mono);
      color: var(--mag);
      letter-spacing:.08em;
      text-transform:uppercase;
      font-size: .78rem;
      margin-bottom: 8px;
    }
    .notes p{
      margin:0;
      color: var(--text);
      font-size: .95rem;
      line-height: 1.55;
      white-space: pre-wrap;
    }

    .progress{
      height: 8px;
      border-radius: 999px;
      background: rgba(232,236,255,.12);
      overflow:hidden;
      border:1px solid rgba(232,236,255,.10);
    }
    .bar{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(51,246,255,.9), rgba(255,43,214,.85));
      box-shadow: 0 0 16px rgba(51,246,255,.25);
    }

    /* Mobile: reclaim vertical space by hiding keyboard hints */
    @media (max-width: 560px){
      .hints{ display:none !important; }
      .topline{ font-size: 11px; }
      .subtitle{ font-size: 13px; }
      .panel-content{ font-size: .98rem; }
    }

    @media (min-width: 992px){
      .slide{ padding: 28px 26px 120px; }
    }

    @media print{
      body{ overflow:visible; }
      header, footer, .notes{ display:none !important; }
      .deck{ border:none; box-shadow:none; }
      .slide{ position:relative; opacity:1 !important; transform:none !important; page-break-after: always; height: 100vh; }
    }
  </style>
</head>

<body>
  <div class="container-fluid d-flex flex-column min-vh-100 position-relative" style="z-index:1;">

    <!-- Top Bar -->
    <header class="py-2">
      <div class="d-flex align-items-start justify-content-between flex-wrap gap-2">
        <div class="d-flex align-items-center gap-2 flex-wrap">
          <span class="badge-course mono">IT 221</span>
          <div class="mono text-muted2" style="font-size:.9rem;">
            Week 3 — Malware &amp; Computer Viruses (Threat Landscape)
          </div>
        </div>
        <div class="d-flex gap-2 flex-wrap">
          <button class="btn btn-terminal mono" id="prevBtn" type="button" title="Previous (←)">← Prev</button>
          <button class="btn btn-terminal mono" id="nextBtn" type="button" title="Next (→)">Next →</button>
          <button class="btn btn-terminal mono" id="notesBtn" type="button" title="Toggle speaker notes (S)">Notes</button>
        </div>
      </div>
    </header>

    <!-- Stage -->
    <main class="flex-grow-1 pb-2" style="min-height:0;">
      <div class="deck w-100 h-100 position-relative" id="deck"></div>

      <!-- Notes overlay -->
      <div class="notes" id="notes" aria-live="polite">
        <div class="hdr">
          <span>Speaker Notes</span>
          <span id="notesSlide">Slide 1</span>
        </div>
        <p id="notesText"></p>
      </div>
    </main>

    <!-- Bottom Bar -->
    <footer class="pb-3">
      <div class="d-flex align-items-center justify-content-between flex-wrap gap-2 mono text-muted2" style="font-size:.82rem;">
        <div class="d-flex align-items-center flex-wrap gap-2 hints">
          <span>Navigate:</span>
          <span class="px-2 py-1 rounded" style="border:1px solid rgba(232,236,255,.14); background: rgba(232,236,255,.08);">←</span>
          <span class="px-2 py-1 rounded" style="border:1px solid rgba(232,236,255,.14); background: rgba(232,236,255,.08);">→</span>
          <span class="px-2 py-1 rounded" style="border:1px solid rgba(232,236,255,.14); background: rgba(232,236,255,.08);">Space</span>
          <span class="ms-2">Notes:</span>
          <span class="px-2 py-1 rounded" style="border:1px solid rgba(232,236,255,.14); background: rgba(232,236,255,.08);">S</span>
          <span class="ms-2">Jump:</span>
          <span class="px-2 py-1 rounded" style="border:1px solid rgba(232,236,255,.14); background: rgba(232,236,255,.08);">1–9</span>
          <span class="px-2 py-1 rounded" style="border:1px solid rgba(232,236,255,.14); background: rgba(232,236,255,.08);">0=10</span>
          <span class="px-2 py-1 rounded" style="border:1px solid rgba(232,236,255,.14); background: rgba(232,236,255,.08);">G…Enter</span>
        </div>

        <div class="d-flex align-items-center gap-3">
          <div id="counter">1 / 18</div>
          <div class="progress" style="width:min(240px, 42vw);"><div class="bar" id="bar"></div></div>
        </div>
      </div>
    </footer>
  </div>

  <script>
    // ===== Slides (ALL 18) =====
    const slides = [
      {
        title: "The Malware Menace: Code, Vectors, and Payloads",
        subtitle: "Week 3 | Information Assurance and Security 1",
        kicker: "TITLE",
        left: `**Big Idea:** Malware is *software with intent*—code written to violate security goals.

**Tonight’s question:** When you see a suspicious file/link, can you reason:
1) *How did it get in?* (vector)
2) *What does it do?* (payload)
3) *Which CIA pillar breaks?* (Week 1)
4) *Which SecSDLC control could stop it?* (Week 2)`,
        rightTitle: "Lecture Thread",
        right: `**Continuity Map**
• Week 1 — CIA Triad: what must be protected
• Week 2 — SecSDLC: how to build & maintain securely
• Week 3 — Malware: how attackers break systems

**Today’s output:** a mental model you can apply to ANY malware family.`,
        notes: "Set expectations: malware is not magic; it’s code + delivery + objectives. Emphasize continuity: CIA (goals) + SecSDLC (controls) + malware (threat mechanics)."
      },
      {
        title: "Learning Objectives",
        subtitle: "By the end of this session, you can…",
        kicker: "OBJECTIVES",
        left: `**Classification**
• Distinguish **propagation**: Virus vs Worm
• Distinguish **payload**: Ransomware, Spyware, Wiper, Botnet, etc.

**Security mapping**
• Map malware types to **Confidentiality / Integrity / Availability** (Week 1)

**Detection concepts**
• Explain **polymorphism** and why signatures fail

**Safe analysis skill**
• Perform **static analysis** on a theoretical script (read-only, no execution)`,
        rightTitle: "Success Criteria",
        right: `If I show you a scenario (email + file + symptoms), you can answer:
1) likely malware category
2) likely CIA impact
3) likely stage in the kill chain
4) best prevention point in SecSDLC`,
        notes: "Make it explicit: assessment is reasoning, not tooling. Students should learn structured thinking: classify → map to CIA → place in the kill chain → propose control."
      },
      {
        title: "Recall: The CIA Triad (Week 1 Connection)",
        subtitle: "Malware is a tool for breaking a pillar",
        kicker: "WEEK 1 LINK",
        left: `**Confidentiality (C):** secrets exposed
• Spyware, keyloggers, info stealers
• Browser credential theft, session hijacking

**Integrity (I):** data becomes untrustworthy
• File infectors, macro viruses, tampering
• Website defacement, silent data edits

**Availability (A):** services/data become unreachable
• Ransomware, wipers, botnet-driven DDoS`,
        rightTitle: "Mapping Examples",
        right: `**C breach:** passwords exfiltrated → accounts taken
**I breach:** grades/database records altered
**A breach:** files encrypted → operations stop

**Professor cue:** “Which pillar is hit FIRST?”
Often: C → then I/A as follow-on damage.`,
        notes: "Use relatable examples (grades, payroll, school systems). Ask: primary vs secondary impact."
      },
      {
        title: "Malware Anatomy: Vector vs Payload",
        subtitle: "Entry mechanism vs post-entry behavior",
        kicker: "CORE MODEL",
        left: `**Vector = how it gets in**
• Email attachment (Office macro, PDF exploit)
• Malicious link (credential phishing → dropper)
• USB (autorun, bait files)
• Drive-by download (compromised website)
• Exploit of vulnerability (unpatched service)

**Payload = what it does**
• Encrypt, steal, delete, spy, open backdoor, recruit into botnet`,
        rightTitle: "Threat Reasoning",
        right: `**Delivery Truck vs Bomb**
• Blocking vectors reduces initial compromise probability
• Limiting payload impact reduces blast radius

**Controls:**
• Vector controls: email filtering, user training, patching
• Payload controls: least privilege, backups, monitoring`,
        notes: "Two-axis thinking: entry controls vs blast-radius controls."
      },
      {
        title: "History Lesson: Philippine Context",
        subtitle: "ILOVEYOU (LoveBug) — 2000",
        kicker: "PH CASE STUDY",
        left: `**What happened?**
• Emailed as a love letter, actually a VBScript worm
• Users opened it → it executed and mass-mailed itself

**Mechanism (simplified):**
• Social engineering subject line
• Script overwrote/modified files → Integrity damage
• Spread via address book → rapid propagation`,
        rightTitle: "Why it matters today",
        right: `**Lessons that still apply:**
• Humans click emotionally compelling bait
• Email remains a top vector
• Scripting languages can be powerful + dangerous

**Policy note:** increased pressure for PH cyber policy development (E-Commerce Act era).`,
        notes: "Localize: 'old' patterns still drive modern attacks."
      },
      {
        title: "Virus vs Worm",
        subtitle: "Propagation is the key difference",
        kicker: "PROPAGATION",
        left: `**Virus (Parasitic)**
• Attaches to a host file (exe/doc)
• Needs user action (run/open)
• Often modifies files → Integrity damage

**Worm (Standalone)**
• Self-replicates without user help
• Uses network paths or vulnerabilities
• Can spread extremely fast → Availability risk`,
        rightTitle: "Comparison Table",
        right: `**Host needed?** Virus ✅ | Worm ❌
**User click needed?** Virus often ✅ | Worm often ❌
**Primary spread:** files/media | networks/services

**Defensive focus:**
Virus → user training + file scanning
Worm → patching + segmentation`,
        notes: "Worm defense is mostly engineering discipline (patching, segmentation)."
      },
      {
        title: "Trojans & Backdoors",
        subtitle: "Deception-driven compromise",
        kicker: "SOCIAL ENGINEERING",
        left: `**Trojan**
• Looks legitimate (installer, crack, PDF viewer)
• Executes hidden actions (dropper, credential theft)

**Backdoor**
• Persistent secret access
• Enables remote control later

**Common bait:**
• "Free" software, "cracks", fake updates`,
        rightTitle: "Week 2 (SecSDLC) Link",
        right: `Trojans exploit **process gaps**:
• weak software sourcing
• lack of code signing / integrity checks
• users granted admin rights

**SecSDLC control examples:**
• approved software lists
• least privilege
• secure update channels`,
        notes: "Tie to SecSDLC: procurement/supply chain + least privilege."
      },
      {
        title: "Rootkits",
        subtitle: "Stealth at the OS level",
        kicker: "STEALTH",
        left: `**What rootkits do**
• Hide malware processes/files
• Intercept system calls
• Disable or blind security tools

**Where they live**
• User-mode (less powerful)
• Kernel-mode (more powerful, harder to detect)`,
        rightTitle: "Trust Problem",
        right: `If the OS is compromised, your tools may report false safety.

**Practical consequence:**
Incident response may require:
• offline scanning
• trusted boot
• re-imaging systems`,
        notes: "Trust chain: if measuring instrument is corrupted, reports are unreliable."
      },
      {
        title: "Ransomware",
        subtitle: "The modern cash cow",
        kicker: "PAYLOAD",
        left: `**Business model**
• Monetizes downtime and panic
• Often targets organizations (schools, LGUs, SMEs)

**Typical chain**
1) Initial access (phish/exploit)
2) Privilege escalation
3) Lateral movement
4) Encryption + ransom note
5) Sometimes data theft (“double extortion”)`,
        rightTitle: "CIA Impact & Recovery",
        right: `**Primary hit:** Availability (A)
**Secondary hits:** Confidentiality (exfiltration), Integrity (tampering)

**Defense essentials:**
• offline backups
• patching
• least privilege
• network segmentation
• incident response plan`,
        notes: "Emphasize resilience: backups + restore drills."
      },
      {
        title: "Advanced Evasion: Polymorphism",
        subtitle: "Why signatures alone fail",
        kicker: "EVASION",
        left: `**Signature detection**
• Antivirus matches known byte patterns
• Works well for known, stable malware

**Polymorphism**
• Malware changes its code appearance
• Same function/behavior, different bytes
• Each copy looks ‘new’ to signature scanners`,
        rightTitle: "What defenders do instead",
        right: `Shift from “what it looks like” to “what it does”:
• behavioral detection
• anomaly monitoring

**Concept:** mutate form, keep intent.`,
        notes: "Polymorphism complicates signature matching; behavior complements it."
      },
      {
        title: "The Cyber Kill Chain",
        subtitle: "A full attack story (with malware inside)",
        kicker: "ATTACK MODEL",
        left: `1) **Reconnaissance** — target research (Week 2: risk context)
2) **Weaponization** — malware packed into a deliverable
3) **Delivery** — email/USB/link
4) **Exploitation** — code runs (macro, vulnerability, user run)
5) **Installation** — persistence/backdoor
6) **C2** — ‘phones home’
7) **Actions** — steal/encrypt/destroy`,
        rightTitle: "Breaking the chain",
        right: `**Stop at Delivery:** email filtering + user training
**Stop at Exploitation:** patching, macro restrictions
**Stop at Installation:** endpoint protection, least privilege
**Stop at C2:** firewall egress controls, DNS monitoring

Earlier stop = cheaper defense.`,
        notes: "Controls map to stages. Earlier stop = cheaper defense."
      },
      {
        title: "Adware, Spyware, & Logic Bombs",
        subtitle: "Common ‘everyday’ threats",
        kicker: "THREAT CATALOG",
        left: `**Adware**
• Aggressive ads, redirects
• Often bundled with installers

**Spyware / Keyloggers**
• Records keystrokes/screens
• Steals cookies/tokens

**Logic bomb**
• Dormant code waits for trigger
• Often insider risk (disgruntled employee)`,
        rightTitle: "CIA & Real-World Clues",
        right: `**C clues:** unknown logins, password resets, MFA prompts
**I clues:** files modified, configs changed
**A clues:** encrypted files, services down

Logic bomb triggers: date, user account removed, specific event.`,
        notes: "Symptoms → CIA impact → likely malware class."
      },
      {
        title: "Lab Activity: Static Analysis (Paper-Based)",
        subtitle: "Read-only analysis — do NOT run",
        kicker: "SAFE PRACTICE",
        left: `**Scenario:** You find a "maintenance" script in a USB drive.
Your job: identify intent and risk by reading.

**Rules:**
• Do not execute
• Identify suspicious commands
• Map impact to CIA Triad
• Propose one SecSDLC control to prevent it`,
        rightTitle: "Suspicious Batch Script",
        right: `@echo off
attrib +h +s C:\\Users\\Ray\\Documents\\*.*
shutdown /s /t 00`,
        notes: "Frame as exam skill: read, reason, map to CIA + control."
      },
      {
        title: "Static Analysis Walkthrough",
        subtitle: "Line-by-line reasoning",
        kicker: "DECOMPOSITION",
        left: `**Line 1: @echo off**
• Hides command output → reduces user awareness

**Line 2: attrib +h +s …\\Documents\\*.* **
• Sets Hidden + System attributes
• Result: files appear ‘missing’ to most users

**Line 3: shutdown /s /t 00**
• Forces shutdown immediately
• Prevents user from responding`,
        rightTitle: "Risk Assessment",
        right: `**CIA impact:**
• Availability: user can’t access documents easily
• Integrity: files not changed, but accessibility/manipulation risk exists

**What to do IRL:**
• isolate device
• copy script for review
• restore attributes safely`,
        notes: "Clarify: hiding != encryption, but it still disrupts availability."
      },
      {
        title: "Detection Methods",
        subtitle: "How defenders identify malware",
        kicker: "DEFENSE",
        left: `**Signature-Based (classic)**
• Matches known fingerprints
• Fast + low false positives
• Weak vs new/polymorphic threats

**Heuristic / Behavioral (modern)**
• Flags suspicious actions
• Better for unknown threats
• Needs tuning to reduce false alarms`,
        rightTitle: "Behavior Examples",
        right: `Red flags:
• Office app spawning PowerShell
• Unknown program editing startup entries
• Massive file renaming/encryption
• Program attempting outbound to rare domains

Ask: “Does this action match the app’s job?”`,
        notes: "Behavior patterns without teaching attacks; focus on mismatch."
      },
      {
        title: "Malware in the SecSDLC (Week 2 Connection)",
        subtitle: "Controls across the lifecycle",
        kicker: "WEEK 2 LINK",
        left: `**Requirements / Design**
• threat modeling: identify vectors
• security requirements: least privilege, logging

**Implementation / Testing**
• secure config baselines
• dependency hygiene
• code signing, integrity checks

**Deployment / Maintenance**
• patching & vulnerability mgmt
• backups + restore drills
• monitoring + incident playbooks`,
        rightTitle: "Where malware thrives",
        right: `Malware succeeds when the lifecycle is weak:
• unpatched systems → worms
• uncontrolled installs → trojans
• missing backups → ransomware wins

SecSDLC is your anti-malware pipeline.`,
        notes: "Explicit Week 2 connection: lifecycle discipline reduces malware success."
      },
      {
        title: "Defense in Depth",
        subtitle: "Layered controls reduce risk and impact",
        kicker: "STRATEGY",
        left: `**Layer 1 — People**
• awareness + verification habits

**Layer 2 — Endpoint**
• antivirus/EDR, allowlisting

**Layer 3 — Network**
• firewall, segmentation, DNS controls

**Layer 4 — Resilience**
• backups, restore drills, incident response`,
        rightTitle: "Practical Checklist",
        right: `If you can only do 4 things:
1) update/patch
2) least privilege
3) backup offline
4) train users on links/attachments

Result: fewer infections + faster recovery.`,
        notes: "Actionable priorities for home + small org contexts."
      },
      {
        title: "Summary",
        subtitle: "The take-home model",
        kicker: "RECAP",
        left: `**1) Classify** malware (propagation + payload)
**2) Map** to CIA Triad (Week 1)
**3) Place** in kill chain (where did defense fail?)
**4) Control** via SecSDLC (Week 2)

Key facts:
• Viruses attach; worms self-spread; trojans deceive
• Polymorphism defeats signature-only detection`,
        rightTitle: "Final Thought",
        right: `Security is not about stopping *all* attacks.
It’s about reducing probability + limiting impact + recovering fast.

That’s real-world Information Assurance.`,
        notes: "Tie 3-week arc together: CIA (goals) + SecSDLC (controls) + Malware (threat)."
      },
      {
        title: "Next Week",
        subtitle: "Hacking the Human",
        kicker: "TEASER",
        left: `Next week we shift from code to psychology.

**Topic:** Social Engineering & Phishing

Bring: examples of suspicious messages you’ve seen (remove personal info).`,
        rightTitle: "Bridge to Week 4",
        right: `Many incidents start with a human decision.
Social engineering is often the **vector**.
Malware is the **payload**.

You now have the language to separate the two.`,
        notes: "Bridge: persuasion (vector) → malware (payload)."
      }
    ];

    // ===== Renderer =====
    const deck = document.getElementById('deck');
    const counter = document.getElementById('counter');
    const bar = document.getElementById('bar');
    const notes = document.getElementById('notes');
    const notesText = document.getElementById('notesText');
    const notesSlide = document.getElementById('notesSlide');

    let idx = 0;
    let gotoMode = false;
    let gotoBuf = "";

    function mdToHtml(md){
      return (md || "")
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/\*\*(.*?)\*\*/g, "<strong>$1</strong>")
        .replace(/\n/g, "<br>");
    }

    function createSlide(i, s){
      const el = document.createElement('section');
      el.className = 'slide';
      el.setAttribute('data-index', i);

      const top = document.createElement('div');
      top.className = 'topline';
      top.innerHTML = `
        <div class="d-flex align-items-center gap-2 flex-wrap">
          <span class="pip cyan"></span><span class="pip mag"></span><span class="pip lime"></span>
          <span class="mono">${(s.kicker || "SLIDE")} :: ${String(i+1).padStart(2,'0')}</span>
        </div>
        <div class="mono">IT 221 • Week 3</div>
      `;

      const h = document.createElement('h1');
      h.className = 'h1';
      h.innerText = s.title;

      const sub = document.createElement('div');
      sub.className = 'subtitle';
      sub.innerText = s.subtitle || '';

      const row = document.createElement('div');
      row.className = 'row g-3 mt-1';

      const leftCol = document.createElement('div');
      leftCol.className = (s.right !== undefined) ? 'col-12 col-lg-7' : 'col-12';
      const leftPanel = document.createElement('div');
      leftPanel.className = 'panel';
      leftPanel.innerHTML = `<div class="kicker">${(i===0) ? 'MODULE' : 'CONTENT'}</div><div class="panel-content">${mdToHtml(s.left)}</div>`;
      leftCol.appendChild(leftPanel);
      row.appendChild(leftCol);

      if(s.right !== undefined){
        const rightCol = document.createElement('div');
        rightCol.className = 'col-12 col-lg-5';
        const rightPanel = document.createElement('div');
        rightPanel.className = 'panel';

        const isCode = (s.rightTitle || '').toLowerCase().includes('script') || (s.right || '').includes('@echo');
        rightPanel.innerHTML = `
          <div class="kicker">${(s.rightTitle || 'SIDEBAR').toUpperCase()}</div>
          ${isCode ? `<div class="codebox">${(s.right || '').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')}</div>`
                   : `<div class="panel-content">${mdToHtml(s.right)}</div>`}
        `;
        rightCol.appendChild(rightPanel);
        row.appendChild(rightCol);
      }

      const meta = document.createElement('div');
      meta.className = 'meta';
      meta.innerHTML = `
        <div class="mono">SLIDE_${String(i+1).padStart(2,'0')} • THREAT_LANDSCAPE</div>
        <div class="mono d-flex gap-3 align-items-center">
          <span style="color: rgba(51,246,255,.9)">CONF</span>
          <span style="color: rgba(255,43,214,.9)">INT</span>
          <span style="color: rgba(124,255,107,.9)">AVAIL</span>
        </div>
      `;

      el.appendChild(top);
      el.appendChild(h);
      if(s.subtitle) el.appendChild(sub);
      el.appendChild(row);
      el.appendChild(meta);
      return el;
    }

    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

    function render(){
      deck.innerHTML = '';
      slides.forEach((s,i)=> deck.appendChild(createSlide(i,s)));
      idx = 0;
      update();
    }

    function update(){
      const all = [...deck.querySelectorAll('.slide')];
      all.forEach(el => el.classList.remove('active'));
      if(all[idx]) all[idx].classList.add('active');

      counter.textContent = `${idx+1} / ${slides.length}`;
      bar.style.width = `${((idx+1)/slides.length)*100}%`;

      notesSlide.textContent = `Slide ${idx+1}`;
      notesText.textContent = slides[idx].notes || '(No notes for this slide)';

      const active = deck.querySelector('.slide.active');
      if(active) active.scrollTop = 0;
    }

    function next(){ idx = clamp(idx+1, 0, slides.length-1); update(); }
    function prev(){ idx = clamp(idx-1, 0, slides.length-1); update(); }
    function toggleNotes(){ notes.classList.toggle('visible'); }

    document.getElementById('nextBtn').addEventListener('click', next);
    document.getElementById('prevBtn').addEventListener('click', prev);
    document.getElementById('notesBtn').addEventListener('click', toggleNotes);

    window.addEventListener('keydown', (e) => {
      const k = e.key;

      if(gotoMode){
        if(k === 'Enter'){
          const n = parseInt(gotoBuf, 10);
          if(!Number.isNaN(n)){
            idx = clamp(n-1, 0, slides.length-1);
            update();
          }
          gotoMode = false; gotoBuf = "";
          return;
        }
        if(k === 'Escape'){ gotoMode = false; gotoBuf=""; return; }
        if(/\d/.test(k)){ gotoBuf += k; return; }
        return;
      }

      if(k === 'ArrowRight' || k === ' ' || k === 'PageDown'){ e.preventDefault(); next(); }
      if(k === 'ArrowLeft' || k === 'PageUp'){ e.preventDefault(); prev(); }
      if(k.toLowerCase() === 's'){ toggleNotes(); }

      if(/^[1-9]$/.test(k)){ idx = clamp(parseInt(k,10)-1, 0, slides.length-1); update(); }
      if(k === '0'){ idx = clamp(9, 0, slides.length-1); update(); }
      if(k.toLowerCase() === 'g'){ gotoMode = true; gotoBuf = ""; }
    });

    render();
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
